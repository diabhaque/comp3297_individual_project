{"version":3,"sources":["home/AddLocationModal.tsx","home/LocationDataTable.tsx","home/LocationSelector.tsx","home/Home.tsx","client/requests.ts","client/utils.ts","App.tsx","reportWebVitals.ts","index.tsx"],"names":["AddLocationModal","onSubmit","useState","visible","setVisible","type","onClick","onCreate","values","console","log","onCancel","CollectionCreateForm","Form","useForm","form","title","okText","cancelText","onOk","validateFields","then","resetFields","catch","info","layout","name","initialValues","modifier","Item","label","rules","required","message","style","width","min","LocationDataTable","locationData","columns","Object","keys","map","field","dataIndex","key","dataSource","pagination","Option","Select","LocationSelector","locations","onChange","options","location","value","showSearch","defaultValue","undefined","placeholder","optionFilterProp","filterOption","input","option","toLowerCase","indexOf","filterSort","optionA","optionB","localeCompare","openNotificationWithIcon","body","notification","description","placement","Home","setLocations","currentLocation","setCurrentLocation","currentLocationData","setCurrentLocationData","useEffect","isCancelled","url","URL","request","Request","toString","fetch","r","json","err","getLocations","filter","params","JSON","stringify","resourceURL","apiEndpoint","URLSearchParams","ok","getLocationData","display","flexDirection","justifyContent","fontSize","fontWeight","paddingBottom","paddingTop","borderTop","borderBottom","method","headers","addLocation","concat","App","className","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.4adc3999.chunk.js","sourcesContent":["import React, { useState } from \"react\";\nimport { Modal, Button, Form, Input, InputNumber } from \"antd\";\nimport { Location } from \"../types/locationTypes\";\ninterface AddLocationModalProps {\n    onSubmit: (location: Location) => void;\n}\n\nexport const AddLocationModal = ({ onSubmit }: AddLocationModalProps) => {\n    const [visible, setVisible] = useState(false);\n\n    const onCreate = (values: any) => {\n        console.log(\"Received values of form: \", values);\n        onSubmit(values as Location)\n        setVisible(false);\n    };\n\n    return (\n        <div>\n            <Button\n                type=\"primary\"\n                onClick={() => {\n                    setVisible(true);\n                }}\n            >\n                Add Location\n            </Button>\n            <CollectionCreateForm\n                visible={visible}\n                onCreate={onCreate}\n                onCancel={() => {\n                    setVisible(false);\n                }}\n            />\n        </div>\n    );\n};\n\ninterface AddLocationFormProps {\n    visible: boolean;\n    onCreate: (values: Location) => void;\n    onCancel: () => void;\n}\n\nconst CollectionCreateForm = ({\n    visible,\n    onCreate,\n    onCancel\n}: AddLocationFormProps) => {\n    const [form] = Form.useForm();\n    return (\n        <Modal\n            visible={visible}\n            title=\"Add a new Location\"\n            okText=\"Add\"\n            cancelText=\"Cancel\"\n            onCancel={onCancel}\n            onOk={() => {\n                form.validateFields()\n                    .then((values) => {\n                        form.resetFields();\n                        onCreate(values);\n                    })\n                    .catch((info) => {\n                        console.log(\"Validate Failed:\", info);\n                    });\n            }}\n        >\n            <Form\n                form={form}\n                layout=\"vertical\"\n                name=\"form_in_modal\"\n                initialValues={{ modifier: \"public\" }}\n            >\n                <Form.Item\n                    name=\"name\"\n                    label=\"Location Name\"\n                    rules={[\n                        {\n                            required: true,\n                            message: \"Please input the name of the location!\"\n                        }\n                    ]}\n                >\n                    <Input />\n                </Form.Item>\n\n                <Form.Item\n                    name=\"populationSize\"\n                    label=\"Current Estimated Population\"\n                    rules={[\n                        {\n                            required: true,\n                            message: \"Please input the Current Estimated Population!\"\n                        }\n                    ]}\n                >\n                    <InputNumber style={{width: '100%'}} min=\"0\"/>\n                </Form.Item>\n\n                <Form.Item\n                    name=\"apiEndpoint\"\n                    label=\"API Endpoint\"\n                    rules={[\n                        {\n                            required: true,\n                            message: \"Please input a valid URL! (e.g. https://www.google.com)\",\n                            type: 'url'\n                        }\n                    ]}\n                >\n                    <Input />\n                </Form.Item>\n\n                <Form.Item\n                    name=\"resourceURL\"\n                    label=\"URL of Resource\"\n                    rules={[\n                        {\n                            required: true,\n                            message: \"Please input a valid URL! (e.g. https://www.google.com)\",\n                            type: 'url'\n                        }\n                    ]}\n                >\n                    <Input />\n                </Form.Item>\n            </Form>\n        </Modal>\n    );\n};\n\n","import { Table } from \"antd\";\nimport { LocationData } from \"../types/locationTypes\";\n\ninterface LocationDataTableProps {\n    locationData: LocationData;\n}\n\nexport const LocationDataTable = ({ locationData }: LocationDataTableProps) => {\n    const columns = Object.keys(locationData).map((field) => {\n        return {\n            title: field,\n            dataIndex: field,\n            key: field\n        };\n    });\n\n    return (\n        <Table dataSource={[{ ...locationData, key: 1 }]} columns={columns} pagination={false}/>\n    );\n};\n","import { Select } from \"antd\";\nimport { ValueType } from \"rc-input-number/lib/utils/MiniDecimal\";\nimport { Location } from \"../types/locationTypes\";\n\ninterface LocationSelectorProps {\n    locations: Location[];\n    onChange: (value: ValueType) => void;\n}\n\nconst { Option } = Select;\n\nexport const LocationSelector = ({\n    locations,\n    onChange\n}: LocationSelectorProps) => {\n\n    const options = locations.map((location)=><Option key={location.name} value={location.name}>{location.name}</Option>)\n\n    return (\n        <Select\n            showSearch\n            style={{ width: 200 }}\n            onChange={onChange}\n            defaultValue={undefined}\n            placeholder=\"Search to Select\"\n            optionFilterProp=\"children\"\n            filterOption={(input, option) =>\n                option?.value.toLowerCase().indexOf(input.toLowerCase()) >= 0\n            }\n            filterSort={(optionA, optionB) =>\n                optionA.value.toLowerCase().localeCompare(optionB.value.toLowerCase())\n            }\n        >\n            {options}\n        </Select>\n    );\n};\n","import { useEffect, useState } from \"react\";\nimport { Location, LocationData } from \"../types/locationTypes\";\nimport { addLocation, getLocations, getLocationData } from \"../client/requests\";\nimport { AddLocationModal } from \"./AddLocationModal\";\nimport { LocationDataTable } from \"./LocationDataTable\";\nimport { LocationSelector } from \"./LocationSelector\";\nimport { Button, notification, Space } from 'antd';\nimport \"antd/dist/antd.css\";\nimport { ValueType } from \"rc-input-number/lib/utils/MiniDecimal\";\nimport { IconType } from \"antd/lib/notification/index\";\n\nconst openNotificationWithIcon = (type: IconType, title: string, body: string) => {\n    notification[type]({\n      message: title,\n      description: body,\n      placement: 'bottomLeft'\n    });\n  };\n\nexport const Home = () => {\n    const [locations, setLocations] = useState<Location[]>([]);\n    const [currentLocation, setCurrentLocation] = useState<Location | null>(\n        null\n    );\n    const [\n        currentLocationData,\n        setCurrentLocationData\n    ] = useState<LocationData | null>(null);\n\n    useEffect(() => {\n        let isCancelled = false;\n\n        getLocations().then((r) => {\n            if (!isCancelled && r) {\n                setLocations(r);\n                setCurrentLocation(\n                    r.filter((location) => location.name === \"Hong Kong\")[0]\n                );\n            }else{\n                openNotificationWithIcon('error', 'Error', 'Unable to retrieve location data!')\n            }\n        });\n\n        return () => {\n            isCancelled = true;\n        };\n    }, []);\n\n    useEffect(() => {\n        if (currentLocation) {\n            getLocationData(currentLocation).then((r) => {\n                if (r !== null) {\n                    setCurrentLocationData(r[0]);\n                } else {\n                    console.log(\"Could not retrieve location data!\");\n                    openNotificationWithIcon('error', 'Error', 'Unable to retrieve location data!')\n                }\n            });\n        }\n    }, [currentLocation]);\n\n    const onLocationSelectorChange = (value: ValueType) => {\n        setCurrentLocation(\n            locations.filter(\n                (location) => location.name === value.toString()\n            )[0]\n        );\n    };\n\n    const onAddLocationSubmit = (location: Location) => {\n        // CHECK FOR CORRECT RESPONSE\n        addLocation(location).then((r) => {\n            if (r) {\n                setLocations(locations.concat([r]));\n            } else {\n                console.log(\"Error!\");\n                openNotificationWithIcon('error', 'Error', 'Unable to add location to database!')\n            }\n        });\n    };\n\n    return (\n        <div>\n            <div\n                style={{\n                    display: \"flex\",\n                    flexDirection: \"row\",\n                    justifyContent: \"center\",\n                    fontSize: \"50px\",\n                    fontWeight: \"bolder\"\n                }}\n            >\n                Cov Retrieve\n            </div>\n            <div\n                style={{\n                    display: \"flex\",\n                    flexDirection: \"row\",\n                    justifyContent: \"space-around\",\n                    paddingBottom: \"1vh\",\n                    paddingTop: \"1vh\",\n                    borderTop: \"1px solid black\",\n                    borderBottom: \"1px solid black\"\n                }}\n            >\n                <LocationSelector\n                    locations={locations}\n                    onChange={onLocationSelectorChange}\n                />\n                <AddLocationModal onSubmit={onAddLocationSubmit} />\n            </div>\n\n            <div>\n                {currentLocationData && (\n                    <LocationDataTable locationData={currentLocationData} />\n                )}\n            </div>\n        </div>\n    );\n};\n","import { getHostName } from \"./utils\";\nimport { Location, LocationData } from \"../types/locationTypes\";\n\nexport const getLocations = (): Promise<Location[] | null> => {\n    const url = new URL(`https://${getHostName()}/api/locations`);\n    const request = new Request(url.toString());\n\n    return fetch(request)\n        .then((r) => r.json())\n        .then((r) => r as Location[])\n        .catch((err) => {\n            console.log(err)\n            return null\n        });\n};\n\nexport const addLocation = (location: Location): Promise<Location | null> => {\n    const request = new Request(`https://${getHostName()}/api/locations/`, {\n        method: \"post\",\n        headers: {\n            \"Content-type\": \"application/json; charset=UTF-8\"\n        },\n        body: JSON.stringify(location)\n    });\n\n    let ok = false;\n    return fetch(request)\n        .then((r) => {\n            ok = r.ok;\n            return r.json();\n        })\n        .then((r) => {\n            if (ok) {\n                return r as Location;\n            } else {\n                return null;\n            }\n        })\n        .catch((err) => {\n            console.log(err)\n            return null\n        });\n};\n\nexport const getLocationData = (location: Location): Promise<LocationData[] | null> => {\n    let params = {\n        \"q\": JSON.stringify({\n            \"resource\":location.resourceURL,\n            \"section\": 1,\n            \"format\":\"json\",\n            \"filters\":[\n                [1, \"eq\", [\"01/03/2021\"]]\n            ]\n        })\n    }\n    const url = new URL(location.apiEndpoint + '?' + new URLSearchParams(params).toString())\n    const request = new Request(url.toString());\n\n    let ok = false;\n    return fetch(request)\n        .then((r) => {\n            ok = r.ok;\n            return r.json();\n        })\n        .then((r) => {\n            if (ok) {\n                return r as LocationData[];\n            } else {\n                return null;\n            }\n        })\n        .catch((err)=>{\n            console.log(err)\n            return null\n        });\n};\n","export const getHostName = (): string => {\n    return \"cov-retrieve.herokuapp.com\"; \n    // return \"localhost:8000\"\n};","import { Home } from './home/Home'\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Home/>\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}