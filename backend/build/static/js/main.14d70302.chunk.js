(this.webpackJsonpui=this.webpackJsonpui||[]).push([[0],{146:function(e,t,n){},223:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),r=n(25),i=n.n(r),c=(n(146),n(58)),l=function(e){var t={q:JSON.stringify({resource:e.resourceURL,section:1,format:"json",filters:[]})},n=new URL(e.apiEndpoint+"?"+new URLSearchParams(t).toString()),o=new Request(n.toString()),a=!1;return fetch(o).then((function(e){return a=e.ok,e.json()})).then((function(t){return a?function(e,t){var n=t.slice(-8),o=n[n.length-1];return console.log(o),[{"Name of Location":e.name,"As of date":o["As of date"],"Total number of confirmed cases":o["Number of confirmed cases"],"Total number of confirmed cases per million of the population":o["Number of confirmed cases"]/e.populationSize,"Total number of fatalities":o["Number of death cases"],"Total number of fatalities per million of population":o["Number of death cases"]/e.populationSize,"Number of new cases today":o["Number of confirmed cases"]-n[n.length-2]["Number of confirmed cases"],"7-day average number of new cases":(o["Number of confirmed cases"]-n[0]["Number of confirmed cases"])/7,"Number of new fatalities today":o["Number of death cases"]-n[n.length-2]["Number of death cases"],"7-day average number of new fatalities":(o["Number of death cases"]-n[0]["Number of death cases"])/7}]}(e,t):null})).catch((function(e){return console.log(e),null}))},s=n(31),u=n(226),f=n(229),d=n(228),b=n(227),m=n(20),j=function(e){var t=e.onSubmit,n=Object(o.useState)(!1),a=Object(c.a)(n,2),r=a[0],i=a[1];return Object(m.jsxs)("div",{children:[Object(m.jsx)(s.a,{type:"primary",onClick:function(){i(!0)},children:"Add Location"}),Object(m.jsx)(h,{visible:r,onCreate:function(e){console.log("Received values of form: ",e),t(e),i(!1)},onCancel:function(){i(!1)}})]})},h=function(e){var t=e.visible,n=e.onCreate,o=e.onCancel,a=u.a.useForm(),r=Object(c.a)(a,1)[0];return Object(m.jsx)(f.a,{visible:t,title:"Add a new Location",okText:"Add",cancelText:"Cancel",onCancel:o,onOk:function(){r.validateFields().then((function(e){r.resetFields(),n(e)})).catch((function(e){console.log("Validate Failed:",e)}))},children:Object(m.jsxs)(u.a,{form:r,layout:"vertical",name:"form_in_modal",initialValues:{modifier:"public"},children:[Object(m.jsx)(u.a.Item,{name:"name",label:"Location Name",rules:[{required:!0,message:"Please input the name of the location!"}],children:Object(m.jsx)(d.a,{})}),Object(m.jsx)(u.a.Item,{name:"populationSize",label:"Current Estimated Population",rules:[{required:!0,message:"Please input the Current Estimated Population!"}],children:Object(m.jsx)(b.a,{style:{width:"100%"},min:"0"})}),Object(m.jsx)(u.a.Item,{name:"apiEndpoint",label:"API Endpoint",rules:[{required:!0,message:"Please input a valid URL! (e.g. https://www.google.com)",type:"url"}],children:Object(m.jsx)(d.a,{})}),Object(m.jsx)(u.a.Item,{name:"resourceURL",label:"URL of Resource",rules:[{required:!0,message:"Please input a valid URL! (e.g. https://www.google.com)",type:"url"}],children:Object(m.jsx)(d.a,{})})]})})},p=n(113),v=n(225),O=function(e){var t=e.locationData,n=Object.keys(t).map((function(e){return{title:e,dataIndex:e,key:e}}));return Object(m.jsx)(v.a,{dataSource:[Object(p.a)(Object(p.a)({},t),{},{key:1})],columns:n,pagination:!1})},g=n(78),x=g.a.Option,w=function(e){var t=e.locations,n=e.onChange,o=t.map((function(e){return Object(m.jsx)(x,{value:e.name,children:e.name},e.name)}));return Object(m.jsx)(g.a,{showSearch:!0,style:{width:200},onChange:n,defaultValue:void 0,placeholder:"Search to Select",optionFilterProp:"children",filterOption:function(e,t){return(null===t||void 0===t?void 0:t.value.toLowerCase().indexOf(e.toLowerCase()))>=0},filterSort:function(e,t){return e.value.toLowerCase().localeCompare(t.value.toLowerCase())},children:o})},y=n(140),C=(n(222),function(e,t,n){y.a[e]({message:t,description:n,placement:"bottomLeft"})}),S=function(){var e=Object(o.useState)([]),t=Object(c.a)(e,2),n=t[0],a=t[1],r=Object(o.useState)(null),i=Object(c.a)(r,2),s=i[0],u=i[1],f=Object(o.useState)(null),d=Object(c.a)(f,2),b=d[0],h=d[1];Object(o.useEffect)((function(){var e=!1;return function(){var e=new URL("https://".concat("cov-retrieve.herokuapp.com","/api/locations")),t=new Request(e.toString());return fetch(t).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return console.log(e),null}))}().then((function(t){!e&&t?(a(t),u(t.filter((function(e){return"Hong Kong"===e.name}))[0])):C("error","Error","Unable to retrieve location data!")})),function(){e=!0}}),[]),Object(o.useEffect)((function(){s&&l(s).then((function(e){null!==e?h(e[0]):(console.log("Could not retrieve location data!"),C("error","Error","Unable to retrieve location data!"))}))}),[s]);return Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",fontSize:"50px",fontWeight:"bolder"},children:"Cov Retrieve"}),Object(m.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-around",paddingBottom:"1vh",paddingTop:"1vh",borderTop:"1px solid black",borderBottom:"1px solid black"},children:[Object(m.jsx)(w,{locations:n,onChange:function(e){u(n.filter((function(t){return t.name===e.toString()}))[0])}}),Object(m.jsx)(j,{onSubmit:function(e){(function(e){var t=new Request("https://".concat("cov-retrieve.herokuapp.com","/api/locations/"),{method:"post",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(e)}),n=!1;return fetch(t).then((function(e){return n=e.ok,e.json()})).then((function(e){return n?e:null})).catch((function(e){return console.log(e),null}))})(e).then((function(e){e?a(n.concat([e])):(console.log("Error!"),C("error","Error","Unable to add location to database!"))}))}})]}),Object(m.jsx)("div",{children:b&&Object(m.jsx)(O,{locationData:b})})]})};var L=function(){return Object(m.jsx)("div",{className:"App",children:Object(m.jsx)(S,{})})},N=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,230)).then((function(t){var n=t.getCLS,o=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),o(e),a(e),r(e),i(e)}))};i.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(L,{})}),document.getElementById("root")),N()}},[[223,1,2]]]);
//# sourceMappingURL=main.14d70302.chunk.js.map