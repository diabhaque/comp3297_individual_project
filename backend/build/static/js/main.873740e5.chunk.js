(this.webpackJsonpui=this.webpackJsonpui||[]).push([[0],{142:function(e,t,n){},219:function(e,t,n){"use strict";n.r(t);var o=n(0),i=n.n(o),c=n(25),a=n.n(c),r=(n(142),n(58)),l=n(31),u=n(222),s=n(225),d=n(224),j=n(223),f=n(20),h=function(e){var t=e.onSubmit,n=Object(o.useState)(!1),i=Object(r.a)(n,2),c=i[0],a=i[1];return Object(f.jsxs)("div",{children:[Object(f.jsx)(l.a,{type:"primary",onClick:function(){a(!0)},children:"Add Location"}),Object(f.jsx)(b,{visible:c,onCreate:function(e){console.log("Received values of form: ",e),t(e),a(!1)},onCancel:function(){a(!1)}})]})},b=function(e){var t=e.visible,n=e.onCreate,o=e.onCancel,i=u.a.useForm(),c=Object(r.a)(i,1)[0];return Object(f.jsx)(s.a,{visible:t,title:"Add a new Location",okText:"Add",cancelText:"Cancel",onCancel:o,onOk:function(){c.validateFields().then((function(e){c.resetFields(),n(e)})).catch((function(e){console.log("Validate Failed:",e)}))},children:Object(f.jsxs)(u.a,{form:c,layout:"vertical",name:"form_in_modal",initialValues:{modifier:"public"},children:[Object(f.jsx)(u.a.Item,{name:"name",label:"Location Name",rules:[{required:!0,message:"Please input the name of the location!"}],children:Object(f.jsx)(d.a,{})}),Object(f.jsx)(u.a.Item,{name:"populationSize",label:"Current Estimated Population",rules:[{required:!0,message:"Please input the Current Estimated Population!"}],children:Object(f.jsx)(j.a,{style:{width:"100%"},min:"0"})}),Object(f.jsx)(u.a.Item,{name:"apiEndpoint",label:"API Endpoint",rules:[{required:!0,message:"Please input a valid URL! (e.g. https://www.google.com)",type:"url"}],children:Object(f.jsx)(d.a,{})}),Object(f.jsx)(u.a.Item,{name:"resourceURL",label:"URL of Resource",rules:[{required:!0,message:"Please input a valid URL! (e.g. https://www.google.com)",type:"url"}],children:Object(f.jsx)(d.a,{})})]})})},p=n(109),m=n(221),O=function(e){var t=e.locationData,n=Object.keys(t).map((function(e){return{title:e,dataIndex:e,key:e}}));return Object(f.jsx)(m.a,{dataSource:[Object(p.a)(Object(p.a)({},t),{},{key:1})],columns:n,pagination:!1})},v=n(77),x=v.a.Option,g=function(e){var t=e.locations,n=e.onChange,o=t.map((function(e){return Object(f.jsx)(x,{value:e.name,children:e.name},e.name)}));return Object(f.jsx)(v.a,{showSearch:!0,style:{width:200},onChange:n,defaultValue:void 0,placeholder:"Search to Select",optionFilterProp:"children",filterOption:function(e,t){return(null===t||void 0===t?void 0:t.value.toLowerCase().indexOf(e.toLowerCase()))>=0},filterSort:function(e,t){return e.value.toLowerCase().localeCompare(t.value.toLowerCase())},children:o})},C=(n(218),function(){var e=Object(o.useState)([]),t=Object(r.a)(e,2),n=t[0],i=t[1],c=Object(o.useState)(null),a=Object(r.a)(c,2),l=a[0],u=a[1],s=Object(o.useState)(null),d=Object(r.a)(s,2),j=d[0],b=d[1];Object(o.useEffect)((function(){var e=!1;return function(){var e=new URL("https://".concat("cov-retrieve.herokuapp.com","/api/locations")),t=new Request(e.toString());return fetch(t).then((function(e){return e.json()})).then((function(e){return e}))}().then((function(t){e||(i(t),u(t.filter((function(e){return"Hong Kong"===e.name}))[0]))})),function(){e=!0}}),[]),Object(o.useEffect)((function(){l&&function(e){var t={q:JSON.stringify({resource:e.resourceURL,section:1,format:"json",filters:[[1,"eq",["01/03/2021"]]]})},n=new URL(e.apiEndpoint+"?"+new URLSearchParams(t).toString()),o=new Request(n.toString()),i=!1;return fetch(o).then((function(e){return i=e.ok,e.json()})).then((function(e){return i?e:null}))}(l).then((function(e){null!==e?b(e[0]):console.log("Could not retrieve location data!")}))}),[l]);return Object(f.jsxs)("div",{children:[Object(f.jsx)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",fontSize:"50px",fontWeight:"bolder"},children:"Cov Retrieve"}),Object(f.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-around",paddingBottom:"1vh",paddingTop:"1vh",borderTop:"1px solid black",borderBottom:"1px solid black"},children:[Object(f.jsx)(g,{locations:n,onChange:function(e){u(n.filter((function(t){return t.name===e.toString()}))[0])}}),Object(f.jsx)(h,{onSubmit:function(e){(function(e){var t=new Request("https://".concat("cov-retrieve.herokuapp.com","/api/locations/"),{method:"post",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(e)}),n=!1;return fetch(t).then((function(e){return n=e.ok,e.json()})).then((function(e){return n?e:null}))})(e).then((function(e){e?i(n.concat([e])):console.log("Error!")}))}})]}),Object(f.jsx)("div",{children:j&&Object(f.jsx)(O,{locationData:j})})]})});var w=function(){return Object(f.jsx)("div",{className:"App",children:Object(f.jsx)(C,{})})},S=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,226)).then((function(t){var n=t.getCLS,o=t.getFID,i=t.getFCP,c=t.getLCP,a=t.getTTFB;n(e),o(e),i(e),c(e),a(e)}))};a.a.render(Object(f.jsx)(i.a.StrictMode,{children:Object(f.jsx)(w,{})}),document.getElementById("root")),S()}},[[219,1,2]]]);
//# sourceMappingURL=main.873740e5.chunk.js.map