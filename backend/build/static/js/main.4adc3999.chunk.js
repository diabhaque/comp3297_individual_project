(this.webpackJsonpui=this.webpackJsonpui||[]).push([[0],{146:function(e,t,n){},223:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),i=n(25),a=n.n(i),c=(n(146),n(58)),l=n(31),u=n(226),s=n(229),d=n(228),f=n(227),j=n(20),b=function(e){var t=e.onSubmit,n=Object(o.useState)(!1),r=Object(c.a)(n,2),i=r[0],a=r[1];return Object(j.jsxs)("div",{children:[Object(j.jsx)(l.a,{type:"primary",onClick:function(){a(!0)},children:"Add Location"}),Object(j.jsx)(h,{visible:i,onCreate:function(e){console.log("Received values of form: ",e),t(e),a(!1)},onCancel:function(){a(!1)}})]})},h=function(e){var t=e.visible,n=e.onCreate,o=e.onCancel,r=u.a.useForm(),i=Object(c.a)(r,1)[0];return Object(j.jsx)(s.a,{visible:t,title:"Add a new Location",okText:"Add",cancelText:"Cancel",onCancel:o,onOk:function(){i.validateFields().then((function(e){i.resetFields(),n(e)})).catch((function(e){console.log("Validate Failed:",e)}))},children:Object(j.jsxs)(u.a,{form:i,layout:"vertical",name:"form_in_modal",initialValues:{modifier:"public"},children:[Object(j.jsx)(u.a.Item,{name:"name",label:"Location Name",rules:[{required:!0,message:"Please input the name of the location!"}],children:Object(j.jsx)(d.a,{})}),Object(j.jsx)(u.a.Item,{name:"populationSize",label:"Current Estimated Population",rules:[{required:!0,message:"Please input the Current Estimated Population!"}],children:Object(j.jsx)(f.a,{style:{width:"100%"},min:"0"})}),Object(j.jsx)(u.a.Item,{name:"apiEndpoint",label:"API Endpoint",rules:[{required:!0,message:"Please input a valid URL! (e.g. https://www.google.com)",type:"url"}],children:Object(j.jsx)(d.a,{})}),Object(j.jsx)(u.a.Item,{name:"resourceURL",label:"URL of Resource",rules:[{required:!0,message:"Please input a valid URL! (e.g. https://www.google.com)",type:"url"}],children:Object(j.jsx)(d.a,{})})]})})},p=n(113),m=n(225),O=function(e){var t=e.locationData,n=Object.keys(t).map((function(e){return{title:e,dataIndex:e,key:e}}));return Object(j.jsx)(m.a,{dataSource:[Object(p.a)(Object(p.a)({},t),{},{key:1})],columns:n,pagination:!1})},v=n(78),g=v.a.Option,x=function(e){var t=e.locations,n=e.onChange,o=t.map((function(e){return Object(j.jsx)(g,{value:e.name,children:e.name},e.name)}));return Object(j.jsx)(v.a,{showSearch:!0,style:{width:200},onChange:n,defaultValue:void 0,placeholder:"Search to Select",optionFilterProp:"children",filterOption:function(e,t){return(null===t||void 0===t?void 0:t.value.toLowerCase().indexOf(e.toLowerCase()))>=0},filterSort:function(e,t){return e.value.toLowerCase().localeCompare(t.value.toLowerCase())},children:o})},C=n(140),w=(n(222),function(e,t,n){C.a[e]({message:t,description:n,placement:"bottomLeft"})}),S=function(){var e=Object(o.useState)([]),t=Object(c.a)(e,2),n=t[0],r=t[1],i=Object(o.useState)(null),a=Object(c.a)(i,2),l=a[0],u=a[1],s=Object(o.useState)(null),d=Object(c.a)(s,2),f=d[0],h=d[1];Object(o.useEffect)((function(){var e=!1;return function(){var e=new URL("https://".concat("cov-retrieve.herokuapp.com","/api/locations")),t=new Request(e.toString());return fetch(t).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return console.log(e),null}))}().then((function(t){!e&&t?(r(t),u(t.filter((function(e){return"Hong Kong"===e.name}))[0])):w("error","Error","Unable to retrieve location data!")})),function(){e=!0}}),[]),Object(o.useEffect)((function(){l&&function(e){var t={q:JSON.stringify({resource:e.resourceURL,section:1,format:"json",filters:[[1,"eq",["01/03/2021"]]]})},n=new URL(e.apiEndpoint+"?"+new URLSearchParams(t).toString()),o=new Request(n.toString()),r=!1;return fetch(o).then((function(e){return r=e.ok,e.json()})).then((function(e){return r?e:null})).catch((function(e){return console.log(e),null}))}(l).then((function(e){null!==e?h(e[0]):(console.log("Could not retrieve location data!"),w("error","Error","Unable to retrieve location data!"))}))}),[l]);return Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",fontSize:"50px",fontWeight:"bolder"},children:"Cov Retrieve"}),Object(j.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-around",paddingBottom:"1vh",paddingTop:"1vh",borderTop:"1px solid black",borderBottom:"1px solid black"},children:[Object(j.jsx)(x,{locations:n,onChange:function(e){u(n.filter((function(t){return t.name===e.toString()}))[0])}}),Object(j.jsx)(b,{onSubmit:function(e){(function(e){var t=new Request("https://".concat("cov-retrieve.herokuapp.com","/api/locations/"),{method:"post",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(e)}),n=!1;return fetch(t).then((function(e){return n=e.ok,e.json()})).then((function(e){return n?e:null})).catch((function(e){return console.log(e),null}))})(e).then((function(e){e?r(n.concat([e])):(console.log("Error!"),w("error","Error","Unable to add location to database!"))}))}})]}),Object(j.jsx)("div",{children:f&&Object(j.jsx)(O,{locationData:f})})]})};var y=function(){return Object(j.jsx)("div",{className:"App",children:Object(j.jsx)(S,{})})},L=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,230)).then((function(t){var n=t.getCLS,o=t.getFID,r=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),o(e),r(e),i(e),a(e)}))};a.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(y,{})}),document.getElementById("root")),L()}},[[223,1,2]]]);
//# sourceMappingURL=main.4adc3999.chunk.js.map